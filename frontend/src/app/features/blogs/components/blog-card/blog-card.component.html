<div class="flex flex-row justify-between ml-5">
  <h2 *ngIf="showSlides">Latest Blogs</h2>
  <h2 *ngIf="!showSlides">Popular Blogs</h2>
  <mat-paginator class="mb-2" [length]="totalBlogs" [pageSize]="itemsPerPage" [pageSizeOptions]="[5, 10, 20, 50]"
    (page)="handlePageEvent($event)">
  </mat-paginator>
</div>

<div class="max-h-[80vh] overflow-auto">
  <mat-grid-list *ngIf="!error" gutterSize="16" [cols]="cols" [rowHeight]="rowHeight">
    <mat-grid-tile *ngFor="let data of paginatedData; trackBy: trackByDataId">

      <div *ngIf="contentLoaded">

        <div class="w-full">
          <mat-card class="shadow-lg p-2" [ngClass]="{'text-center': !fullWidthMode, }" *ngIf="data">

            <div class="flex flex-row mt-1" style="margin-left: 8px;">
              <div class="h-[30px] w-[30px] rounded-full">
                <img src="/assets/images/avatar.svg" alt="user image" *ngIf="!data.user || !data.user.image" />
                <img src="{{ data.user && data.user.image ? data.user.image : '' }}" alt="data?.user?.username"
                  *ngIf="contentLoaded && data.user && data.user.image" class="h-full w-full rounded-full" />
              </div>
              <div>
                <div class="flex flex-row items-center">
                  <h4 class="mx-2" *ngIf="contentLoaded"> {{ data?.user?.username }} </h4>
                </div>
              </div>
              <div> <span>{{ data?.createdAt | date }}</span> </div>
            </div>

            <div [ngClass]="{'flex ': fullWidthMode}">
              <div class="w-full" [ngClass]="{'h-[160px] w-[300px]': !fullWidthMode, 'h-[270px] w-[40%]': fullWidthMode}">
                <img class="mt-1 mx-auto object-contain"
                  [ngClass]="{'max-h-[160px] max-w-[300px]': !fullWidthMode, 'h-[100%] w-[100%] min-w-[100%]': fullWidthMode}"
                  [src]="data.image" alt="{{ data.title }}" />
              </div>

              <mat-card-content class="w-full h-[270px]"
                [ngClass]="{'max-h-[160px]': !fullWidthMode, 'pl-2 flex flex-col justify-between h-[100%] w-[60%] max-w-[60%]': fullWidthMode}">
                <div>
                  <!-- <span class="font-bold text-xs uppercase mb-1">{{ data.category }}</span> -->

                  <p class="truncate hover:whitespace-normal" *ngIf="!fullWidthMode">{{ data.title }}</p>
                  <div class="truncate text-wrap font-black max-h-[60px]" *ngIf="fullWidthMode">
                    <ngx-skeleton-loader *ngIf="!contentLoaded"></ngx-skeleton-loader>
                    <h2 *ngIf="contentLoaded"> {{ data.title }} </h2>
                  </div>
                  <p class="truncate text-sm text-wrap max-h-[40px] w-full" >
                    {{ data.description }}
                  </p>
                  <div class="truncate text-xs text-wrap h-[60px] " *ngIf="fullWidthMode">
                    <div [innerHTML]="sanitizer.bypassSecurityTrustHtml(data?.content)"></div>
                  </div>
                </div>
                <app-rating class="mt-2" [rating]="data.rating" [numReviews]="data.numReviews"></app-rating>

                <div class="flex justify-between mx-1">
                  <!-- <button class="text-blue-700 hover:text-blue-900 " (click)="onUpVote()">
                    <mat-icon class="mr-1">up_vote</mat-icon>
                    <span class="text-sm">({{upVotes}})</span>
                  </button>
                  <button class="text-blue-700 hover:text-blue-900 " (click)="onDownVote()">
                    <mat-icon class="mr-1">down_vote</mat-icon>
                    <span class="text-sm">({{downVotes}})</span>
                  </button>
                  <button class="text-blue-700 hover:text-blue-900 " (click)="onWriteReview()">
                    <mat-icon class="mr-1">write_review</mat-icon>
                    <span class="text-sm">Write Review</span>
                  </button> -->
                  <a [routerLink]="['/blogs/blog-details/', data._id]">
                    <span class="text-blue-400 text-lg justify-end">Read More</span>
                  </a>
                </div>
              </mat-card-content>
            </div>

          </mat-card>
        </div>
      </div>
    </mat-grid-tile>
  </mat-grid-list>
</div>
<div class="flex justify-center mx-auto w-1/2 max-h-[90vh]" *ngIf="noDataFound">
  <img src="/assets/images/no-data-found.png" alt="No Blog Found..!" />
</div>